<?php

namespace Database\Factories;

use App\Models\Block;
use Illuminate\Database\Eloquent\Factories\Factory;
use Illuminate\Support\Str;

/**
 * @extends \Illuminate\Database\Eloquent\Factories\Factory<\App\Models\Coordinate>
 */
class CoordinateFactory extends Factory
{
    /**
     * Define the model's default state.
     *
     * @return array<string, mixed>
     */
    public function definition(): array
    {
        $blocks = Block::query()
            ->select('id')
            ->orderBy('id', 'asc')
            ->pluck('id')
            ->toArray();

        $data = [
            [
                'marker' => 'A',
                'color' => '#55ff00',
                'points' => [
                    ['lat' => -7.611662588770801, 'lng' => 109.1770180391451],
                    ['lat' => -7.611729371676888, 'lng' => 109.1772718588196],
                    ['lat' => -7.611522537438425, 'lng' => 109.1773138564573],
                    ['lat' => -7.611412152719807, 'lng' => 109.1772481058166],
                    ['lat' => -7.611382800759136, 'lng' => 109.1770733422873],
                    ['lat' => -7.611662588770801, 'lng' => 109.1770180391451],
                ]
            ],
            [
                'marker' => 'B',
                'color' => '#ffff00',
                'points' => [
                    ['lat' => -7.611529918847196, 'lng' => 109.1773382311982],
                    ['lat' => -7.61170700918951,  'lng' => 109.1773100379775],
                    ['lat' => -7.611728833647379, 'lng' => 109.1774200977916],
                    ['lat' => -7.611722775822041, 'lng' => 109.1774252274762],
                    ['lat' => -7.611730103182391, 'lng' => 109.1774900865127],
                    ['lat' => -7.611748712058586, 'lng' => 109.1775003776433],
                    ['lat' => -7.611761530138399, 'lng' => 109.177563912328],
                    ['lat' => -7.611483350476971, 'lng' => 109.177599134858],
                    ['lat' => -7.611443940555987, 'lng' => 109.1775636214101],
                    ['lat' => -7.611416915196883, 'lng' => 109.1775160944775],
                    ['lat' => -7.611458475765968, 'lng' => 109.177507004757],
                    ['lat' => -7.61149166282676,  'lng' => 109.1774781852585],
                    ['lat' => -7.611518443018337, 'lng' => 109.1774404022836],
                    ['lat' => -7.611538224332201, 'lng' => 109.1774175869552],
                    ['lat' => -7.61152182631087,  'lng' => 109.1774015034744],
                    ['lat' => -7.611529918847196, 'lng' => 109.1773382311982],
                ]
            ],
            [
                'marker' => 'C',
                'color' => '#767676',
                'points' => [
                    ['lat' => -7.611234549431889, 'lng' => 109.1774533818596],
                    ['lat' => -7.611224757792614, 'lng' => 109.1774755766219],
                    ['lat' => -7.611253819497154, 'lng' => 109.1775157885378],
                    ['lat' => -7.611244716617641, 'lng' => 109.1775286545613],
                    ['lat' => -7.611269639766305, 'lng' => 109.177543303334],
                    ['lat' => -7.611279586889667, 'lng' => 109.1775295892026],
                    ['lat' => -7.611331551240225, 'lng' => 109.177541035709],
                    ['lat' => -7.611353035744744, 'lng' => 109.1775406991563],
                    ['lat' => -7.611370458792687, 'lng' => 109.1775244945911],
                    ['lat' => -7.611409779751356, 'lng' => 109.177518785603],
                    ['lat' => -7.611432807857328, 'lng' => 109.1775614600524],
                    ['lat' => -7.611475360446926, 'lng' => 109.1776013371555],
                    ['lat' => -7.611225091694076, 'lng' => 109.1776289790622],
                    ['lat' => -7.611191594565889, 'lng' => 109.1774308373339],
                    ['lat' => -7.611234549431889, 'lng' => 109.1774533818596],
                ]
            ],
            [
                'marker' => 'D',
                'color' => '#00bfff',
                'points' => [
                    ['lat' => -7.611411128434352, 'lng' => 109.177253593713],
                    ['lat' => -7.611368607887754, 'lng' => 109.1772299182996],
                    ['lat' => -7.611286257485159, 'lng' => 109.1771882194883],
                    ['lat' => -7.611254368377651, 'lng' => 109.1772003121131],
                    ['lat' => -7.611228055591599, 'lng' => 109.1772152822509],
                    ['lat' => -7.611211345240061, 'lng' => 109.1772004669203],
                    ['lat' => -7.61119703272883,  'lng' => 109.1772173344564],
                    ['lat' => -7.611193055324344, 'lng' => 109.1772377595028],
                    ['lat' => -7.611211441160655, 'lng' => 109.1772575300389],
                    ['lat' => -7.611206936098331, 'lng' => 109.1772931897031],
                    ['lat' => -7.611229690368811, 'lng' => 109.1773355235233],
                    ['lat' => -7.611211528355206, 'lng' => 109.1773568742888],
                    ['lat' => -7.61124054957851,  'lng' => 109.1773954658454],
                    ['lat' => -7.611237336870074, 'lng' => 109.1774479439706],
                    ['lat' => -7.611192860052276, 'lng' => 109.1774203696532],
                    ['lat' => -7.611147251523497, 'lng' => 109.1771186046217],
                    ['lat' => -7.61138300684791,  'lng' => 109.1770752976294],
                    ['lat' => -7.611415643558075, 'lng' => 109.1772462993457],
                    ['lat' => -7.611411128434352, 'lng' => 109.177253593713],
                ]
            ],
            [
                'marker' => 'E',
                'color' => '#0066ff',
                'points' => [
                    ['lat' => -7.611487389962345, 'lng' => 109.1773236475781],
                    ['lat' => -7.611414704625105, 'lng' => 109.1773353802701],
                    ['lat' => -7.611378975135995, 'lng' => 109.1773199512356],
                    ['lat' => -7.61134126882697,  'lng' => 109.1773466440741],
                    ['lat' => -7.611306931175222, 'lng' => 109.177352438409],
                    ['lat' => -7.611257500442664, 'lng' => 109.1773577380357],
                    ['lat' => -7.611224578362393, 'lng' => 109.1772890172952],
                    ['lat' => -7.611236751061838, 'lng' => 109.1772389355649],
                    ['lat' => -7.611283428973325, 'lng' => 109.1772098940003],
                    ['lat' => -7.611487389962345, 'lng' => 109.1773236475781],
                ]
            ],
            [
                'marker' => 'F',
                'color' => '#9933ff',
                'points' => [
                    ['lat' => -7.611342881224713, 'lng' => 109.1773592121075],
                    ['lat' => -7.611359429101592, 'lng' => 109.1773737758401],
                    ['lat' => -7.611386311752251, 'lng' => 109.1773776807949],
                    ['lat' => -7.611403719554285, 'lng' => 109.1773630498622],
                    ['lat' => -7.611398437159247, 'lng' => 109.1773469614697],
                    ['lat' => -7.611495504318018, 'lng' => 109.177330014909],
                    ['lat' => -7.611504452168745, 'lng' => 109.1773366380309],
                    ['lat' => -7.611510057779936, 'lng' => 109.1773776378928],
                    ['lat' => -7.611489381964245, 'lng' => 109.177432824477],
                    ['lat' => -7.611441154032259, 'lng' => 109.1774944064631],
                    ['lat' => -7.611376273014706, 'lng' => 109.1775058737761],
                    ['lat' => -7.611322514296809, 'lng' => 109.1775169383066],
                    ['lat' => -7.611281043678808, 'lng' => 109.1775075576823],
                    ['lat' => -7.611251319420333, 'lng' => 109.1774733949715],
                    ['lat' => -7.611269623239441, 'lng' => 109.1773741892633],
                    ['lat' => -7.611342881224713, 'lng' => 109.1773592121075],
                ]
            ],
        ];

        $currentTime = now();
        $uuids = collect(range(1, count($data)))
            ->map(fn() => (string) Str::uuid())
            ->sort()
            ->values()
            ->all();

        foreach ($data as $index => &$entry) {
            $entry = array_merge([
                'block_id' => $blocks[$index],
            ], $entry);

            $entry['id'] = $uuids[$index];
            $entry['points'] = json_encode($entry['points']);
            $entry['created_at'] = $currentTime;
            $entry['updated_at'] = $currentTime;
        }

        unset($entry);

        return $data;
    }
}
